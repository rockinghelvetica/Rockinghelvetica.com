<!DOCTYPE html>
<html>
  <head>
    <title>Nicholas Macias, Designer</title>
    <meta name="description" content="Nicholas Macias is a designer, and so forth.">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preload" href="/css/194b518d-0a71-426a-848d-b9a5413fb9da.woff2" as="font" crossorigin>
    <style>
        @font-face {
        font-family: "Bau";
        src: url("data:application/font-woff;base64,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") format("woff");
        font-weight: bold;
        font-style: normal;
        }

        @font-face{
          font-family: "BauWeb W01 Regular";
          src: url("/css/194b518d-0a71-426a-848d-b9a5413fb9da.woff2") format("woff2");
          font-display: swap;
        }
    </style>
    <style>

body, html {
  background: currentColor;
  width: 100%;
  min-height: 100%;
  border: 0;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  position: relative;
  color: #222;
  font-family: "BauWeb W01 Regular", sans-serif;
}

html {
  overflow-y: scroll;
  overflow-x: hidden;
  height: 100vh;
  width: 100%;
  /* Override at breakpoints. */
  font-size: 2.8vw;
  padding: 1em;
}

body {
  height: auto;
  position: relative;
  text-align: left;
  width: 100%;
/*   overflow: hidden; */
}

main {
  background: white;
  padding: 12rem 0 0 0;
  display: flex;
  flex-direction: row-reverse;
  flex-wrap: wrap;
}

main > header {
  flex-basis: 100%;
}

/* 
  Frame elements. Should have own paint context for speed. 
  When in landscape orientation this gets killed; that wasn't applied in 2017 on desktop ah!
*/
body:before, 
body:after {
  content: "";
  display: block;
  height: 1rem;
  position: fixed;
  left: 0;
  top: 0;
  background: currentColor;
  width: 100%;
  z-index: 1000;
  opacity: 0.9;
  will-change: opacity;
}

body:after {
  top: auto;
  bottom: 0;
}




/* TYPE */

body > header {
  background: white;
  position: relative;
  display: block;
/*   TODO */
  height: 36vh;
  min-height: 5rem;
  flex-basis: 100%;
}

h1 {
  position: absolute;
  left: 0;
  top: 0;
  margin: 0;
  font-size: 2.4em;
  padding: 1em;
  font-weight: normal;
  line-height: 1.2;
  width: 11em;
  opacity: 1;
  will-change: opacity;
}

hr {
  margin: 2em 0;
  border: none;
  border-bottom: 1px solid #ddd;
}

footer {
  color: gray;
  font-size: 14px;
  margin-top: 25vh;
  padding: 1.5rem;
  flex: 2;
  flex-basis: 100%;
}

a {
  color: currentColor;
  background: white;
  transition: background 0.05s, color 1s;
}

a:hover {
  background: transparent;
  color: #1878C1;
}

strong {
  font-family: Bau;
  font-weight: bold;
}

nav.actions {
  position: absolute;
  bottom: 0;
  left: 0;
  padding: 2.6rem;
}

#tldr {
  font-family: "BauWeb W01 Regular", sans-serif;
  appearance: none;
  user-select: none;
  border: 0; 
  cursor: zoom-out;
  position: fixed;
  z-index: 2000;
  bottom: 4em;
  right: 4em;
  font-size: 14px;
  border-radius: 50%;
  width: 5em;
  height: 5em;
  outline: none;
  background: #FFD750;
}

#tldr:hover {
  background: #FFC700;
}

html:not(.tldr-mode) #tldr {
  cursor: zoom-in;
}

#tldr::-moz-focus-inner {
  border: 0;
  padding: 0;
}




#cases {
  background: white;
  padding: 2.8rem;
  box-sizing: border-box;
  overflow: hidden;
  height: auto;
  max-width: 24em;
  margin: auto;
  flex: 1;
}

.active span {
  background-position: 0.2em;
  background-size: 0% 100%, 100% 100%;
  background-image: linear-gradient(
  to bottom,
  white 1.2em,
  gold 1.2em,
  gold 1.26em,
  white 1.26em),
  linear-gradient(
  to bottom,
  white 1.2em,
  #538c2b 1.2em,
  #538c2b 1.26em,
  white 1.26em);
  background-repeat: no-repeat;
}

em {
  font-style: normal;
  background: yellow;
  mix-blend-mode: multiply;
}

p {
  min-height: 6em;
  overflow-wrap: break-word;
}



/* 
  SLIDES (see also TLDR overrides and mobile specific patches at the end 
  The sticky container and CSS grid usage are new in 2023 patches thanks to AI help (Cursor.so)
*/

#sticky-container {
  position: sticky;
  top: 0;
  align-self: flex-start;
  width: 30vw;
  transition: none;
}

#slides {
  background: white;
  overflow: visible;
  height: calc(100vh - 2rem);
  box-sizing: border-box;
  left: 0;
  width: 30vw;
  transition: transform 0.5s ease-in, width 0.5s ease-out;
}

#slides .scrollable {
  display: grid;
  /* The 2-up layout can flop sequence of widths so the grid is 3 odd columns */
  grid-template-columns: 42.1% 1fr 42.1%; 
  grid-gap: 0;
}

#slides img,
#slides video { 
  object-fit: cover;
  display: block;
  width: 100%;
  height: 100%;
}

.slide[data-state='loading'] {
  opacity: 1;
}

#slides video + img { 
  opacity: 1;
}

#slides video[data-media-state] + img { 
  /* removed for css grid */
  /* display: none; */
} 

.aspect-box {
  position: relative;
  height: 100%;
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
  background: #0077C8;
  transform-origin: 0 0;
  transform: scale(1.0, 1.0);
  /* transition: transform 0.3s ease-in; */
  grid-column-end: span 3;
}

.aspect-portrait {
  min-width: 135px;
  /* height: 42.1875%; */
   /* 42.1875% of grid container width */
  grid-column-end: span 3; /* by default it is full width */
}

.aspect-complement {
  min-width: 185px;
  /* height: 57.2916667%;  */
  /* 57.2916667% of grid container width */
  grid-column-end: span 3; /* by default it is full width */
}







/* html.tldr-mode #slides .scrollable {
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); 
} */

/* @media (min-width: 670px) {
  #slides .scrollable .aspect-portrait,
  #slides .scrollable .aspect-complement {
    grid-column-end: span 2;
  }
} */

html.tldr-mode #slides .scrollable .aspect-portrait {
  grid-column-end: span 1; /* make these elements span one column */
}

html.tldr-mode #slides .scrollable .aspect-complement {
  grid-column-end: span 2; /* make these elements span two columns */
}

/* new in 2023 patch, it animates to zoom width */
html.tldr-mode #sticky-container,
html.tldr-mode #slides {
  width: calc(100vw - 2rem);
}

.tldr-mode #slides .scrollable:after {
  content: "END";
  display: block;
  height: 30vh;
}

/* html:not(.tldr-mode) .aspect-portrait {
    min-height: 237.037037%;
    flex-basis: 100%;
  } 

html:not(.tldr-mode) .aspect-complement {
    min-height: 172.972973%;
  } */

.tldr-mode #slides {
  width: 100%;
  top: 0;
  bottom: auto;
  position: relative;
  overflow: visible;
  transform: none !important;
}

.tldr-mode main {
  padding: 0;
}

.tldr-mode header,
.tldr-mode footer,
.tldr-mode #cases {
  display: none;
}

/* .tldr-mode #slides {
  height: auto;  
}

.tldr-mode #slides .scrollable {
  height: calc((100vw - 2rem) * 0.5625);
}

.tldr-mode.enter #slides .scrollable {
  transform-origin: top left;
  transform: scale(0.3333333333,0.33333);
  transition: none;
} */





/* TODO: set max */
@media (min-width: 1600px) {
  html {
    font-size: 42px;
  }
}

/*
  DISCONTINUE scrollbar in webkit
*/
/* @media (hover: hover) {
  html::-webkit-scrollbar {
    width: 0.5rem;
    background-color: currentColor;
  }

  html::-webkit-scrollbar-thumb {
    background-color: #444;
    border-radius: 1em;
  }  
} */


/* TODO: complete these */
/* Color overrides for slide placeholders. */ 
.slide[data-id],
.slide[data-id="GlisteningAcidicIbizanhound"] {
  background-color: #FFD750;
}


h3 {
  font-size: 1em;
  font-weight: normal;
}

aside p {
  font-size: 0.5rem;
  line-height: 1.4;
  border-left: 1px solid lightgrey;
  padding-left: 1em;
}





/* 

NOTES (2017)
padding on mobile is 0.8rem at 6.25vw

NOTES (2023)
when snapped there is a 1rem margin I can't explain except that maybe in the past
the elements did something else with the border? Like it always had a border 
and then i took it off later? AHHHH. Desktop learned about landscape orientation!

*/

@media (orientation: portrait) {
  h1 {
    width: 9em;
  }
}

/* Changed the top to be 0 because we were seeing a gap on desktop new since 2018 */
/* @media (min-width: 670px) {
  html:not(.tldr-mode) #slides.snapped {
    position: fixed;
    top: 0rem;
    left: 1rem;
    transition: transform 0.5s ease-in;
  }
} */


/* Mobile sizes */
@media (max-width: 670px) {
  html {
    font-size: 6.25vw;
    padding: 0.8em;
  }
  
  main {
    padding: 0;
  }
  
  h1 {
    position: relative;
    text-rendering: optimizeLegibility;
    font-size: 1.8rem;
    padding: 1.2rem;
    left: auto;
    width: auto;
  }
  
  #cases {
    padding: 1.2rem;
    flex: 1;
  }
  
  nav.actions {
    padding: 1.4em;
  }
  
/* TODO: exception for device orientation? items are too tall… */
  
  .aspect-portrait {
    min-height: 237.037037%;
    flex-basis: 100%;
  } 
  .aspect-complement {
    min-height: 172.972973%;
  }
  
  
  
  html:not(.tldr-mode) #slides .scrollable {
    height: 25vw;
  }
 
  

  html:not(.tldr-mode) #slides,
  html:not(.tldr-mode) #tldr {
    position: fixed;
    width: calc((25vw - 16px) / 0.5625);
    height: 25vw;
    top: calc(100vh - 37.5vw);
    left: auto;
    right: 2em;
/*     bottom: 2em; */
  }
  
  html:not(.tldr-mode) #tldr {
    background: transparent;
    padding: 0;
    font-size: 8vw;
    line-height: 25vw;
    color: white;
    display: block;
    text-align: center;
    border-radius: 0;
    margin: 0 -0.45em ; 
/*     TODO wtf is this margin */
  }
  
html:not(.tldr-mode) #slides {
    will-change: opacity;
    opacity: 1;
    transform: translate3d(0,0,0); 
    overflow: hidden;
    box-shadow: 0 6px 30px rgba(0,0,0,0.3);
    border: 8px solid currentColor;
    pointer-events: none;
}
  
html:not(.tldr-mode) .slide:not(.active) {
  display: none;
  }
  
}


/* 2023 Notes: this now applies to desktop oops, added a height rule */
@media (orientation: landscape) and (max-height: 900px) {
  body:after,body:before {
    display: none!important;
  }
}


/* Set a floor size. */
@media (max-width: 300px) { 
  html {
    font-size: 16px!important;
  }
}


    </style>
  </head>
  <body>
<main role="main">
  <header>
    <h1><strong>Nicholas Macias</strong> is&nbsp;a designer, and so&nbsp;forth.</h1>
  </header>
  <section id="cases">
    <p>I make cross-screen products that audiences experience billions of times per year. <a class="we-hope-that-you-choke" data-path="file/d/1CchB3_dKtDt-8h-RKeqDfz4-UumgRvvx/view" href="https://drive.google.com/" target="_blank">Resume</a>.</p>
<hr>
    <p data-id="SpanishKindlyEland"><span><em>Watch/Read</em>: I led the first large-scale redesign of IGN’s editorial content since the advent of autoplay video, responsive web principles, and modern search/social behaviors.</span></p>
<p data-id="AdoredAgreeableFireant"><span>In 2013, articles with video equivalents converted readers to watchers at a ratio of around 0.26 video views. This new design lifted the typical video view rate of a news package by +130%.</span></p>
<p data-id="ClearFrayedChinesecrocodilelizard"><span>I brought a reader-style feed to every article, after discovering how few people ever saw the editorial programming.</span></p>
    <p data-id="GlisteningAcidicIbizanhound"><span>Spreadsheets overtook the number of <s>Photoshop</s><s>Sketch</s>Figma files on my Mac one day.</span></p>
<p data-id="RigidAdmiredFinch"><span>Edge cases are the rule in editorial and user-generated content design. Working with nearly twenty years’ worth of content led my team to developing “live” workflows in our early design process.</span></p>
<p data-id="SophisticatedNaiveFlyingfish"><span>At the behest of engineering leadership, we supported a new, junior development team with a comprehensive, waterfall-style approach to documenting the new article design. It’s an 80 page love letter to Agile.</span></p>
<hr>
    <p data-id="IckyKindFish"><span>If IGN's VR-themed special edition for <em>Snapchat Discover</em> was an American prime-time show, it would have topped the Nielsen ratings the night of June 15, 2016 pulling in 4.5MM US viewers. We earned 11MM+ global uniques in 24 hours. Working closely with Snapchat's editorial director for tips on how to speak to the general Discover audience, our adaptability was rewarded with more than 100 million individual content views.</span></p>
    <hr>
<p data-id="MadeupMediocreGemsbuck"><span><em>Ad Portaling:</em> I developed a new ad technology that increased IGN’s viewable display yield by +27% in 2015. We coined it “portaling” for its allusion to the mechanism in the groundbreaking video game, Portal.</span></p>
<p data-id="ElectricFarawayHarvestmouse"><span>My team launched a digital TV station inside three months’ time, and if that sounds ludicrous, please know that it was. Named <em>IGN1</em>, the goal was to meet evolving watcher behaviors with a new tune-in experience, and we did that by stitching together both live & VOD programming into a 24/7 streaming channel. 
</span></p>
<hr>
<p>Data and experimentation are critical to approaching an already-popular product, and not only to justify roadmap attention. Editorially-ranked lists, on topics like Sci-Fi Movies, or Video Game Moments, are so reliably popular for IGN that a 2008-vintage design had carried forward for many, many years.</p>
<p data-id="WhiteVagueBluejay"><span>Adapting this desktop-only <em>Top 100 List</em> content to its first mobile expression was a sheer project rationale, circa 2016, but a key story buried in the high pageview performance was how user counts were merely comparable to an above-average article or review.
</span></p>
<p data-id="FailingAllCrustacean"><span>Where Half-Life 2 features in a list as well as over 1500 articles across IGN, I recognized opportunity. Our strategy prioritized search and editorial promotion with an evergreen IA and a new visual branding system, braced by the insight that incremental reach held 6-10X returns over other experience factors.</span></p>
<p data-id="OptimisticOldfashionedHairstreakbutterfly"><span>A related experiment, from 2014, had established that removing explicit pagination could grow yield by +56%, while also improving the integrity of the reading experience.</span></p>
<hr>
<p data-id="ClosedIllCaecilian"><span>As much as a <em>video player</em> might represent a “solved” UX problem, today, this wasn't always so. Building players from scratch in 2003 tought me some tricks.</span></p>
<p data-id="SkinnyGrouchyAnt"><span>Gamers are prone to pausing & rewatching moments in videos, and sharing screenshots from such. When designing IGN’s pause state, we made sure to keep the frame clear.</span></p>
    <hr>
<p>IGN reached a total of 8.5MM OTT app installs (Q2 2016) across platforms, including game consoles and set-top devices like AppleTV. My direct contribution varies by project, but all followed a key product strategy: these walled gardens are not like the Web, and IGN needed to invest the platform owners in our success.</p>
<p data-id="GiddyImpureHoneyeater"><span>One example of that strategy in action is the Playstation Store link in the IGN PS4 app, which was the first of its kind.</span></p>
<p data-id="TautHappygoluckyBronco"><span>IGN’s Xbox One App was designed (with Wondersauce) to launch directly into video playback.</span></p>
<p data-id="GrouchyEnchantingKomododragon"><span>Snap panels are an exclusive feature of the Xbox One, and our app aligned well with Microsoft’s competitive story.</span></p>
<p data-id="BrightHastyIbis"><span>Designing for NUI requirements (detail).</span></p>
    <hr>
       <p>At times, product goals are better achieved by internal organization, tools, and process optimizations.
    </p>
<p data-id="SlushyShowyBluefish"><span>To increase the sales value of IGN's live event coverage, I frequently directed (and occasionally animated) the visual branding of our event coverage, seen in many hundreds of millions of video views.</span></p>
<p data-id="ShockedMeanLangur"><span>A designer on my team, Alex, wanted to learn React, and I saw an opportunity to solve a live video production bottleneck. Based on my prototype, Alex designed and built a browser-based tool that allowed a producer to quickly edit motion graphics overlays, output to an inexpensive chroma key switch.</span></p>
    <hr>
    <p data-id="WetMeekChevrotain"><span><em>GamerMetrics</em> translates IGN traffic into a weighted score, a bespoke metric named the GPT, which is used by large publishers and media agencies to help plan their campaigns. I made sure it was friendly to screenshotting for pitch decks.</span></p>
<p data-id="UnsteadyImpossibleElephant"><span>IGN commissions a bi-annual audience segmentation study from Ipsos. In addition to informing product & editorial efforts, the report has significant marketability with media agencies & client businesses.Way back in 2010, I adapted the underlying research into an infographic-style website, launching the story of gamers as influencers (more than introverts). I created everything, starting with the authoring the report.</span></p>
    <hr>
<p data-id="TanOptimalCat"><span>I was told that I helped Typekit get funded, as they used my (webfont-enabled) site design for Jax Vineyards as a favorite slide in their pitch deck.</span></p>
    <hr>
<p data-id="DistortedUltimateConch"><span>I designed an episodic digital companion product for a new children’s show, the WotWots, when Weta Workshop was originally pitching it to major U.S. television networks. Because kids are cognitively diverse—and sometimes, moody—I met the challenge of designing for 2–4 year-old attention spans with a persistent age control that could dynamically adapt the experience.</span></p>
<p>Before iPads, parents were wary of ceding their sole home computer for endless periods. I put parents back in control of the schedule through a clear “goodbye” sequence that saw the WotWots tucked-in, then shipped off to outer space.</p>
<hr>
<aside>
<h3>I am expert in the following topics enough to at least change the vibe of any midsize house party:</h3>
<p>Prototyping, After Effects, why the kids love Snapchat, vanilla javascript (and, natch, memory leaks), JIRA, content strategy, Google Analytics nuances, viewability metrics, HLS video delivery, executive FOMO, Microsoft Xbox app development, deep linking, targeted advertising, long-distance cycling, responsive web design, autoplay interactions, exotic HTML5 inputs, email newsletter QA, performant rendering in browsers, A/B experimentation in Optimizely, the importance of nomenclature, commenting systems, Google Query Language, audience segmentation studies, webfont delivery, visual identity design, and startup business models before their time.</p>
</aside>
  </section>
<div id="sticky-container">
  <section id="slides">
    <div class="scrollable">
  <div class="slide aspect-box active" data-state="unloaded" data-id="SpanishKindlyEland">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SpanishKindlyEland.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SpanishKindlyEland.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695322094/rockinghelvetica.com/SpanishKindlyEland.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/SpanishKindlyEland.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="AdoredAgreeableFireant">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/AdoredAgreeableFireant.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/AdoredAgreeableFireant.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695322094/rockinghelvetica.com/AdoredAgreeableFireant.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/AdoredAgreeableFireant.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box aspect-portrait" data-state="unloaded" data-id="ClearFrayedChinesecrocodilelizard">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ClearFrayedChinesecrocodilelizard.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ClearFrayedChinesecrocodilelizard.jpg 75w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695322094/rockinghelvetica.com/ClearFrayedChinesecrocodilelizard.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/ClearFrayedChinesecrocodilelizard.jpg 810w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box aspect-complement" data-state="unloaded" data-id="GlisteningAcidicIbizanhound">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/GlisteningAcidicIbizanhound.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/GlisteningAcidicIbizanhound.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/GlisteningAcidicIbizanhound.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/GlisteningAcidicIbizanhound.jpg 1110w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="RigidAdmiredFinch">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/RigidAdmiredFinch.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/RigidAdmiredFinch.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/RigidAdmiredFinch.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/RigidAdmiredFinch.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="SophisticatedNaiveFlyingfish">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SophisticatedNaiveFlyingfish.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SophisticatedNaiveFlyingfish.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/SophisticatedNaiveFlyingfish.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/SophisticatedNaiveFlyingfish.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="IckyKindFish">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/IckyKindFish.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/IckyKindFish.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/IckyKindFish.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/IckyKindFish.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="MadeupMediocreGemsbuck">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/MadeupMediocreGemsbuck.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/MadeupMediocreGemsbuck.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/MadeupMediocreGemsbuck.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/MadeupMediocreGemsbuck.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="ElectricFarawayHarvestmouse">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ElectricFarawayHarvestmouse.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ElectricFarawayHarvestmouse.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/ElectricFarawayHarvestmouse.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/ElectricFarawayHarvestmouse.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="WhiteVagueBluejay">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/WhiteVagueBluejay.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/WhiteVagueBluejay.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/WhiteVagueBluejay.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/WhiteVagueBluejay.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="FailingAllCrustacean">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/FailingAllCrustacean.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/FailingAllCrustacean.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/FailingAllCrustacean.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/FailingAllCrustacean.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="OptimisticOldfashionedHairstreakbutterfly">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/OptimisticOldfashionedHairstreakbutterfly.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/OptimisticOldfashionedHairstreakbutterfly.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/OptimisticOldfashionedHairstreakbutterfly.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/OptimisticOldfashionedHairstreakbutterfly.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box aspect-complement" data-state="unloaded" data-id="ClosedIllCaecilian">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ClosedIllCaecilian.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ClosedIllCaecilian.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/ClosedIllCaecilian.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/ClosedIllCaecilian.jpg 1110w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box aspect-portrait" data-state="unloaded" data-id="SkinnyGrouchyAnt">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SkinnyGrouchyAnt.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SkinnyGrouchyAnt.jpg 75w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/SkinnyGrouchyAnt.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/SkinnyGrouchyAnt.jpg 810w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="GiddyImpureHoneyeater">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/GiddyImpureHoneyeater.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/GiddyImpureHoneyeater.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/GiddyImpureHoneyeater.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/GiddyImpureHoneyeater.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="TautHappygoluckyBronco">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/TautHappygoluckyBronco.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/TautHappygoluckyBronco.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/TautHappygoluckyBronco.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/TautHappygoluckyBronco.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box aspect-portrait" data-state="unloaded" data-id="GrouchyEnchantingKomododragon">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/com/GrouchyEnchantingKomododragon.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/com/GrouchyEnchantingKomododragon.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/GrouchyEnchantingKomododragon.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/GrouchyEnchantingKomododragon.jpg 810w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box aspect-complement" data-state="unloaded" data-id="BrightHastyIbis">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695332013/rockinghelvetica.com/BrightHastyIbis.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695332013/rockinghelvetica.com/BrightHastyIbis.jpg 75w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695332013/rockinghelvetica.com/BrightHastyIbis.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695332013/rockinghelvetica.com/BrightHastyIbis.jpg 1110w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="SlushyShowyBluefish">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SlushyShowyBluefish.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/SlushyShowyBluefish.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/SlushyShowyBluefish.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/SlushyShowyBluefish.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="ShockedMeanLangur">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ShockedMeanLangur.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/ShockedMeanLangur.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/ShockedMeanLangur.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/ShockedMeanLangur.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="WetMeekChevrotain">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/WetMeekChevrotain.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/WetMeekChevrotain.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/WetMeekChevrotain.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/WetMeekChevrotain.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="UnsteadyImpossibleElephant">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/UnsteadyImpossibleElephant.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/UnsteadyImpossibleElephant.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/UnsteadyImpossibleElephant.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/UnsteadyImpossibleElephant.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <!--   <div class="slide aspect-box" data-state="unloaded" data-id="TalkativeConventionalEuropeanfiresalamander">
      <img src="https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/TalkativeConventionalEuropeanfiresalamander.jpg" srcset="https://thumbs.gfycat.com/TalkativeConventionalEuropeanfiresalamander.jpg 100w,https://thumbs.gfycat.com/TalkativeConventionalEuropeanfiresalamander.jpg 640w,https://thumbs.gfycat.com/TalkativeConventionalEuropeanfiresalamander-poster.jpg 1920w" sizes="(max-width: 480px) 320px, 100vw">
    </div> -->
  <div class="slide aspect-box" data-state="unloaded" data-id="TanOptimalCat">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/TanOptimalCat.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/TanOptimalCat.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/TanOptimalCat.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/TanOptimalCat.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  <div class="slide aspect-box" data-state="unloaded" data-id="DistortedUltimateConch">
    <img
      src="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/DistortedUltimateConch.jpg"
      srcset="https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/DistortedUltimateConch.jpg 100w,https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/DistortedUltimateConch.jpg 640w,https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/DistortedUltimateConch.jpg 1920w"
      sizes="(max-width: 480px) 320px, 100vw">
  </div>
  </div>
    </div>
  </section>
</div>
  <footer>
    <p>©2017 Nicholas Macias and respective clients.</p>
  </footer>
</main>  
<nav>
  <button type="button" id="tldr">TL:DR</button>
</nav>
<script>
//2023 means faking the Gfycat API

//some API items might need manual overrides because the assets have unique requirements
let gfyAPI = {
  IckyKindFish: {
    "gfyItem": {
      "webmUrl": "https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_10000k,q_auto:best,vc_vp8/v1695325712/rockinghelvetica.com/IckyKindFish.webm"
    }
  },
  BrightHastyIbis: {
    "gfyItem": {
      "webmUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/v1695332013/rockinghelvetica.com/BrightHastyIbis.webm`,
      "mp4Url": `https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_10000k,q_auto:best,vc_h264/v1695332013/rockinghelvetica.com/BrightHastyIbis.mp4`,
      "mobileUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695332013/rockinghelvetica.com/BrightHastyIbis.mp4`
    }
  }
}

function getDefaultGfyItem(id) {
  return {
    "gfyItem": {
        "gfyId": id,
        "gfyName": id,
        "webmUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/v1695322094/rockinghelvetica.com/${id}.webm`,
        "mp4Url": `https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_10000k,q_auto:best,vc_h264/v1695325712/rockinghelvetica.com/${id}.mp4`,
        "mobileUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/${id}.mp4`,
        "thumb100PosterUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/t_media_lib_thumb/v1695322094/rockinghelvetica.com/${id}.jpg`,
        "mobilePosterUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/ac_none,br_1100k,c_scale,q_auto:best,vc_h264,w_640/v1695325712/rockinghelvetica.com/${id}.jpg`,
        "posterUrl": `https://res.cloudinary.com/dxlyd7sac/video/upload/v1695325712/rockinghelvetica.com/${id}.jpg`
      }
  };
}

function ripGfyAPI(id) {
  if (gfyAPI[id]) {
    return {
      "gfyItem": {
        ...getDefaultGfyItem(id).gfyItem,
        ...gfyAPI[id].gfyItem
      }
    };
  } else {
    return getDefaultGfyItem(id);
  }
}

</script>
      <script>
window.rock = (function() {
  'use strict';
  
  // Configuration
  var baseline = {
    hd: true,
    touch: false,
    connections: 3,
    maxVideoElements: 3
  };
  
  if(!window.matchMedia)
    return baseline;
  
  // Runtime stuff
  return Object.assign(baseline, {
    hd: window.matchMedia("(min-device-width: 1024px)").matches,
    touch: window.matchMedia("(hover: hover)").matches
  });
})();



// Per https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md
window.passiveCaptureFlag = false;
try {
  window.addEventListener("test", null, { get passive() {
      window.passiveCaptureFlag = { passive: true } 
  }});
} catch(e) {}



// Should cover things, per https://developer.mozilla.org/en-US/docs/Web/Events/transitionend
window.transitionEndEventName = ('WebkitTransition' in document.documentElement.style) ? 'webkitTransitionEnd' : 'transitionend';



(function(root) {
  'use strict';
  
  var supportsVideo =  !!(HTMLVideoElement && HTMLVideoElement.prototype.canPlayType);
  
  // One-time handler for first paint.
  function firstFrame(e) {
    this.dataset.mediaState = "loadeddata";
    this.removeEventListener("loadeddata", firstFrame);
  }
  
  // Bind to handler, if active. Unbinding happens on pause or when played.
  function playing(e) {
    if(this.parentElement && this.parentElement.classList.contains("active"))
      this.addEventListener("timeupdate", window.cases);
  }
    
  root.Gfy = function( gfyId ) {
    this.id = gfyId;
    this.data = null;
    this.media = null;
  };

  root.Gfy.prototype.setup = function() {      
    if(supportsVideo) {
      var poster = document.querySelector( ".slide[data-id=" + this.id + "] img" );
      if(poster) {
        this.media = this.createVideo( this.data );
        this.media.setAttribute("poster", poster.currentSrc || poster.src);
        poster.parentElement.insertBefore( this.media, poster );
      }
    } else {
      // TODO image fallback case
    }
  };

  
  root.Gfy.prototype.createVideo = function( data ) {
    var vid = document.createElement('video'),
        src = document.createElement('source');

    vid.setAttribute('playsinline', '');
    vid.setAttribute('muted', 'true');
    // Chrome autoplay policy seems to skip the DOM attribute now?
    vid.muted = true;
    vid.className = 'gfy-video';
    vid.autoplay = true;
    vid.loop = true;
    vid.controls = false;
    vid.style.left = '0';
    vid.style.height = '100%';
    vid.style.position = 'absolute';
    vid.style.top = '0';
    vid.style.width = '100%';
    
    // Add sources
    if(window.rock.hd) {
      src.src = data.webmUrl;
      src.type = 'video/webm';
      src.className = "webmsource";

      vid.appendChild(src);
      // A new contender appears.
      src = document.createElement('source');
      src.src = data.mp4Url;
    } else {
      src.src = data.mobileUrl;
    }
    
    // Whether mobile or HD
    src.type = 'video/mp4';
    src.className = "mp4source";    
    vid.appendChild(src);
    
    // GC
    src = null;
    
    // Event for loading state
    vid.addEventListener("loadeddata", firstFrame);
    vid.addEventListener("playing", playing);

    return vid;
  };
  
  
  
  root.Gfy.prototype.pause = function() {
    if(this.media) {
      this.media.removeEventListener("timeupdate", window.cases);
      this.media.pause(); 
    }
  }
  
  
  // Play handles setup, too, by relying on autoplay.
  root.Gfy.prototype.play = function(hover) {
    if(!this.media) {
      this.setup();
    } else if(this.media.paused) {
      // Don't assume browsers return promises for HTMLVideoElement.play()
      // Muffle the warning in case we cross up pause events asynchronously.
      var p = this.media.play();
      if(p !== undefined) 
        p.catch(function(ehh){ void 0; });
    } else if(hover) {
      // Non-active slides might be playing, and need to unbind (activation index passed as hover, 0 or 1)
      this.media.removeEventListener("timeupdate", window.cases);
    }
  };
  
  
  
  root.Gfy.prototype.cull = function() {
    var s;
    console.log("cull " + this.id);
    if( this.media && this.media.parentNode ) {
      // In case video was still loading.
      this.media.removeEventListener("loadeddata", firstFrame);

      // Soundly delete the video.
      // Note that pause is called on our object, in case it does more.
      this.pause();
      this.media.src = "";
      while( s = this.media.firstChild ) {
        this.media.removeChild( s );
      }
      this.media.load();
      // TODO: unbind progress listener if feature is present.
      this.media.parentElement.removeChild( this.media );
      this.media = null;
    } else {
      console.log("not culled in fact");
    }
  }
})(window);
















// Controls slides
window.slides = (function(){
  'use strict';

  // Transcript, for managing how many videos are running.
  // Contains both the singular .active slide and any that have videos retained in DOM.
  var activated = [];
  
  // Track preloading of Gfycat objects
  var preloads = 0;
  var stack = [];
  
  // There are two behaviors where a slide plays: hover, and explicitly active (click, or scroll-intersection).
  // The 'activated' array is the view's model where slide 0 is implicitly .active
  // The slide argument can be a string or a slide element, depending on the site mode.
  // Does not validate slide, so be mindful.
  function setActiveSlide(slide, e) {
    if(typeof slide === "string") {
      slide = document.querySelector('.slide[data-id="'+ slide +'"]');
    } else if(window.cases) {
      // If the case controller is around, let it know that we switched.
      window.cases.activate( slide.dataset.id );
    }

    // Shuffle to front, or prepend if not yet in array.
    // Hover events are second-priority and insert at position 1.
    var a = activated.indexOf(slide),
        insertAt = (e && "mouseover" === e.type) | 0;

    if(a < 0) 
      activated.splice( insertAt, 0, slide );
    else
      Array.prototype.push.apply( activated, activated.splice( insertAt, a - insertAt ) );
    
    // console.log("slide inserted at…" + insertAt)
    return insertAt;
  };

  
  // Not designed to be called on loaded objects.
  // Pretty sure the whole thing can be refactored out now that it's using a local data cache but not interested in pulling threads
  function loadGfyObject(el) {
    var name = el.dataset.id;
    
    el.dataset.state = "loading";
    this.gfys[ name ] = new Gfy(name);

    // removed: a success function bound to name that was enaged with the promise returned from gfycat
    
    // This moderates how many begin in parallel, not an all day count.
    preloads++;
    let response = ripGfyAPI(name);
    if (response) {
      document.querySelector(".slide[data-id='" + name + "']").dataset.state = "loaded";
      this.gfys[ name ].data = data.gfyItem;
      // Start next item, maybe.
      --preloads;
      if(stack.length && preloads <= window.rock.connections) 
        this.load( stack.shift() );
    } else {
        console.log('Error: Unable to fetch data');
    }
  }
  
  
  // Render method
  function updateSlides() {
    var a = activated.length,
        slide = activated[0];
    
    // Activated contains at least every slide that should be playing
    // Index 0 is certainly .active, and the next plays conditionally (if present, and only upon :hover)
    // Everything else should be paused or culled, and the list trimmed down to what's left in DOM.
    // console.log( "slides update with " +activated.length);
    while ( --a >= 0 ) {
      var s = activated[a].dataset.id,
          g = this.gfys[s];

      if(!g && a < 2) {

        // Slide is unloaded, and in playable range. 
        // Pull item from stack, then load it via promise.
        // User-interaction might change the state, so we assume nothing & re-render.
        var i = stack.indexOf( slide );
        if( i >= 0) {
          this.load( stack.splice( i, 1 )[0] );
          updateSlides.bind(this)();
        }

      } else {
        // Previously loaded, but may need state reconcilation.
        activated[a].classList.toggle("active", (a === 0));

        // Play, pause, or cull.
        // Cull anything past the allowed count.
        // Pause anything that isn't active or being hovered on.
        if( a >= window.rock.maxVideoElements ) {
          g.cull();
        } else if(g.data) {
          if( a === 0 || (a === 1 && activated[a].matches(":hover")) ) {
            g.play();
          } else { 
            g.pause(); 
          }
        } else {
          // TODO: edge case where promise is mid-flight from Gfycat          
        }
      }
    } 
    void activated.splice( window.rock.maxVideoElements );
    return activated[0];
  }
  
  function focus(target) {
    let remInPixels = parseFloat(getComputedStyle(document.documentElement).fontSize);
    let threshold = 16 * remInPixels;

    if (target && target.parentElement && !window.matchMedia("(max-width: 670px)").matches && window.scrollY > threshold) {
      // The page is scrolled past the threshold to snap the Slides (sticky).
      // Bring slide into focus area
      var rect = target.getBoundingClientRect(),
          y = target.parentElement.getBoundingClientRect().top;
    
      // The slide is "centered" visually vertically with a negative transform
      y += (1 * window.scrub.midpoint - rect.top - (rect.height/2));
      
      // Check if the document has a tldr-mode class
      if (document.documentElement.classList.contains('tldr-mode')) {
        // If tldr-mode is active, apply the y offset to the page's scroll
        window.scrollTo(0, window.scrollY + Math.min(y, 0));
        this.root.style.transform = "";
      } else {
        // If tldr-mode is not active, apply the transform
        this.root.style.transform = "translate3d(0," + Math.min(y,0) + "px,0)";
      }
    } else {
      // The page is not scrolled past the threshold.
      this.root.style.transform = "";
    }
  }
    
  
  
  function reset() {
    // Cull everything video-wise
    Object.keys(this.gfys).forEach(function(gfys, g) {
      gfys[g].cull();
    }.bind(null, this.gfys));
    // And, reset .active slide(s)
    [...document.querySelectorAll(".slide .active, p.active")].forEach(function(a) {
      a.classList.remove("active");
    });
  }
  
  
  // Lazy-get the DOM
  return {
    gfys: {},
    get active() {
      // This remains live, unlike root.
      return document.querySelector("#slides .slide.active") || document.querySelector("#slides .slide");
    },
    get root() {
      // TODO: confirm this doesn't break galaxy notes etc; or, Array.apply(0, NodeList)
      stack = [...document.querySelectorAll(".slide")];
      delete this.root;
      return this.root = document.getElementById('slides');
    },
    activate: setActiveSlide,
    load: loadGfyObject,
    render: updateSlides,
    reset: reset,
    focus: focus
  }
})();




window.cases = (function(){
  'use strict';
  
  // Matches interface of the slides controller
  // This component sorta "wraps" the slides controller when the site is not in TL:DR mode.
  
  function setActiveCase(p, e) {
    // When in TLDR mode, the slide controller may message.
    if(typeof p === "string") {
      console.log("when exiting the slide should sync to " + p);
      //var siblings = document.querySelector( "p.active:not[data-id=" + this.id + "]");
      return;
    }
    // Assumptions for element case:
    // The search routine already ensured that this arg is not currently active before invocation.
    // Also, it will have a dataset.id string
    if(window.slides && p.dataset.id) {
      window.slides.activate( p.dataset.id );
    }
  }
  
  // Added in 2023: refactored out JS-based sticky container for CSS but need this for other logic
  function isStuck() {
    let rect = this.root.getBoundingClientRect();
    let offsetParentRect = this.root.offsetParent.getBoundingClientRect();
    return rect.top <= offsetParentRect.top;
  }

  
  // When case view is on, this update still hits slides first.
  function updateBothViews() {
    var activeSlide = window.slides.render(),
        activeP;
    
    if(activeSlide) {
      var id = activeSlide.dataset.id,
          activish = [...document.querySelectorAll('p.active, p[data-id="' + id + '"]')];
      
      // The query includes any p.active plus our target, to enforce a singlular case.
      // For an initial string value, we carry the final element once hit.
      // Will output the search string if not in DOM (but …how'd you do that?)
      activeP = activish.reduce( function( a, p ) {
        var match = Boolean("string" === typeof a && p.dataset.id === a);
        p.classList.toggle("active", match );
        return (match) ? p : a;
      }, id);
      window.slides.focus(activeSlide);
    }
    return activeP;
  }
  
  // Handle event bound by active video
  function progress( e ) {
    var v = e.target;
    var a = document.querySelector("#cases p.active span");
    var p = 100 * v.currentTime / Math.max(1, v.duration);
    if(a) a.style.backgroundSize = p + "% 100%, 100% 100%";
  }

  
  // Lazy-get the DOM
  return {
    get active() {
      // This getter remains live, unlike root.
      return document.querySelector("#cases p.active") || document.querySelector("#cases p[data-id]");
    },
    get root() {
      delete this.root;
      return this.root = document.getElementById('cases');
    },
    // TEMP
    get progressBar() {
      delete this.progressBar;
      return this.progressBar = document.querySelector('progress');
    },
    activate: setActiveCase,
    render: updateBothViews,
    handleEvent: progress
  }
})();




// Manages scroll observation across mutually-exclusive view states.
// The object is a complex EventListener which also manages related bindings.
// When the target is assigned (toggling TLDR mode) this manages all the side effects of event setup and teardown.
window.scrub = (function() {
  'use strict';
  
  var target = null;
  
  function Scrub() {
    
    // Exposed properties
    this.midpoint = -1;

    // Invalidate only when resized, instead of measuring every frame.
    // Defer measurement so as to have no side effect on first paint.
    // MAYBE: if this makes window resizing sluggish, debounce here, too. 
    this.invalidateMidpoint = function() {
      this.midpoint = Math.floor( window.innerHeight / 2 );
    };
    
    // Designed to handle setup & teardown by simply swapping targets (between TL:DR and verbose views).
    Object.defineProperty(this, 'target', {
      get: function() {
        return target;
      },
      set: function( eventTarget ) {
        console.log("setting target", eventTarget, target);
        if(target) {
          console.log("tearing down events");
          target.removeEventListener("scroll", this, window.passiveCaptureFlag);
          window.removeEventListener("resize", this.invalidateMidpoint);
          this.invalidateMidpoint();
        }
        if(eventTarget) {
          console.log("setting up events");
          this.invalidateMidpoint();
          target = eventTarget;
          target.addEventListener("scroll", this, window.passiveCaptureFlag);
          window.addEventListener("resize", this.invalidateMidpoint);
        }
      }
    });

    // Placeholder
    this.handleEvent = function(e) { void 0; };
  }; 
  
  return new Scrub();
})();



// V1.4
function main() {
  
  var rAF = null;

  
  
  // Utility for finding our slide in event path in pointer/touch event handlers.
  function delegatedSlide(el) {
    return (Node.ELEMENT_NODE === el.nodeType && el.classList.contains("slide"));
  } 

  /*
  
    2023 update:
    - fix scrolling behavior but also modernize
    - does traverse view work?
  
  
  */
  
  // Event handler callback for scroll
  // Bound from outside of scrub obj because we'll be hot-swapping it in V2.
  /*
    2023 code review NOTES: this existed before intersection observers
    it relies on there being an active slide/case text (defaults to first item) 
    and then it picks a traversal method based on whether the element top is above or below 
    the midpoint of the viewport. WHere the top is below it looks up (wastes a cycle looking at active)
    but if it's above it looks down

    the code either breaks with target being the slide under midpoint or empty

  */
  function traverseView(view, time) { 
        
    // This queries the DOM, but it's light-touch.
    var active = view.active;
    
    // Goal: find midpoint intersection in fewest measurements.
    // Typically, scrolling updates are adjacent, so our search should be one or two hops
    // of traversal from the .active element, if we choose the right direction to look.
    var rect = active.getBoundingClientRect(),
        traversalMethod = (rect.top > this.midpoint) ? "previousElementSibling" : "nextElementSibling",
        target = active;
    
    while( target ) {
      var r = target.getBoundingClientRect();
      // Terminate if target is hitting the midpoint
      if( r.top < this.midpoint && r.bottom > this.midpoint ) break; 
      // Terminate with no hit when we've exceeded the direction, but not intersecting.
      if(( r.bottom > this.midpoint && traversalMethod === "nextElementSibling") 
        || ( r.bottom < this.midpoint && traversalMethod === "previousElementSibling")) {
        target = null;
        break;
      }
      target = target[traversalMethod];
    };
    
    // Update snap threshold
    // TODO: consider CSS alternative if supported
    // var snap = Boolean(window.cases.root.getBoundingClientRect().top <= 0);
    // window.slides.root.classList.toggle("snapped", snap);
    
    // Checking target === active doesn't account for default case
    // Hence, we compare on the DOM.
    if(target && !target.classList.contains("active")) {
      view.activate(target);
      view.render();
    }
    
    // Next frame ready.
    rAF = null;
  }
  
  
  
  var browse = traverseView.bind( window.scrub, window.slides );
  var read = traverseView.bind( window.scrub, window.cases );

  
  
  // Event: hover on slide. 
  document.querySelector("#slides").addEventListener("mouseout", function(e) {
    var slide = e.composedPath().find( delegatedSlide );
    if( slide && !slide.classList.contains("active")) {
      try { 
        window.slides.gfys[ slide.dataset.id ].pause();
      } catch( ehh ) { };
    }
  });
  
  
  
  // Requires composedPath polyfill.
  // TODO: does not invoke render method
  var userSelectSlide = function(e) {
    var slide = e.composedPath().find( delegatedSlide );
    if(slide) {
      this.activate( slide, e );
      this.render();
    }

  }.bind(window.slides);

  
  
  scrub.handleEvent = function(e) {
    return !rAF && (rAF = requestAnimationFrame( read ));
  };
  
  // This setter kicks off the chain of lazy-bindings.
  // e.g. void slides.root if not used for assignment; the init behavior is …subtle.
  
  void slides.root;
  scrub.target = cases.root.ownerDocument;
  
  
  
  //EVENTS
  //TODO: constrain hover to desktop, etc.
  document.querySelector("#slides").addEventListener("click", userSelectSlide);
  document.querySelector("#slides").addEventListener("mouseover", userSelectSlide);
  //TODO: refactor if keeping
  window.addEventListener("keydown", function(e) {
    console.log(e.key);
    if(e.key === "Escape") {
      window.slides.reset();
      event.preventDefault();
    }
  }, true);
  
  // TLDR
  document.querySelector("button").addEventListener("click", function(e) {
    var tldr = document.documentElement.classList.contains("tldr-mode");
    
    if(tldr) {
      console.log('installing cases');
      document.documentElement.classList.remove("tldr-mode");
      this.innerText = "TL:DR";
      scrub.handleEvent = function(e) {
        return !rAF && (rAF = requestAnimationFrame( read ));
      };
      // not sure why this was in there originally
      // scrub.target = cases.root.ownerDocument;

      // when restoring the case studies we want to sync back to the text related to the slide that is showing
      // TO DO is probably to offset the scroll position with focus()
      let activeSlideId = document.querySelector(".slide.active").dataset.id;
      setTimeout(() => {
        let textBlock = document.querySelector(`p[data-id="${activeSlideId}"]`);
        if (textBlock) {
          window.slides.focus(textBlock);
        }
      }, 0);

    } else {
      console.log('installing slides');
      document.documentElement.classList.add("tldr-mode");
      this.innerText = "READ";
      scrub.handleEvent = function(e) {
        return !rAF && (rAF = requestAnimationFrame( browse ));
      };
      // scrub.target = slides.root.ownerDocument;
    }
    
    //SETUP:
    // set handler (e.g. bound to slides view)
    // set target (document or scrolling div)
    // swap by changing both (if needed)
    //scrub.target = slides.root.ownerDocument
    // TODO: quiet down there, videos
    
  });
}



// INIT
document.addEventListener("DOMContentLoaded", main);



// PRELOAD
window.addEventListener("load", function() {  
  //duplicate per number of connections
 window.slides.load(  document.getElementsByClassName('slide')[0] );
  
 
  
 var mobileSize = window.matchMedia("(max-width: 670px)");
 
  mobileSize.addListener(function(mql){
    if(mql.matches)
      window.slides.root.style.transform = "";
  });
 
});



// ETC
// Handle gently-obfuscated link.
document.addEventListener("DOMContentLoaded", function() {
  var link = document.querySelector("a.we-hope-that-you-choke");  
  function restoreLink(e) {
    this.href = this.href + this.dataset.path;
    return e && this.removeEventListener(e.type, restoreLink);
  }
  if("ontouchstart" in document.documentElement) {
    restoreLink.bind(link)();
  } else {
    link.addEventListener(window.transitionEndEventName, restoreLink);
  }
});




// POLYFILLS
// Event.composedPath
// Possibly normalize to add window to Safari's chain, as it does not?
(function(E, d, w) {
  if(!E.composedPath) {
    E.composedPath = function() {
      if (this.path) {
        return this.path;
      } 
    var target = this.target;
    
    this.path = [];
    while (target.parentNode !== null) {
      this.path.push(target);
      target = target.parentNode;
    }
    this.path.push(d, w);
    return this.path;
    }
  }
})(Event.prototype, document, window);

// from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md
(function (arr) {
  arr.forEach(function (item) {
    if (item.hasOwnProperty('remove')) {
      return;
    }
    Object.defineProperty(item, 'remove', {
      configurable: true,
      enumerable: true,
      writable: true,
      value: function remove() {
        this.parentNode.removeChild(this);
      }
    });
  });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

      </script>
  </body>
</html>
